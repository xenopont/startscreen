<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Start Screen</title>
		<meta name="viewport" content="width=device-width" />
		<style type="text/css">
            /* <![CDATA[ */
			body
			{
				overflow: hidden;
                min-height: 450px;
                min-width: 450px;
			}
            div#page
            {
                position: absolute;
                left: 0px;
                top: 0px;
                right: 0px;
                bottom: 0px;
            }
			div#top_bar
			{
				background: rgba(255, 255, 255, 0.1);
                box-shadow: inset 0px -1px 0px 0px rgba(255, 255, 255, 0.1);
				position: absolute;
				left: 0px;
				right: 0px;
				top: 0px;
				height: 64px;
                z-index: 1000;
			}
                ul#top_bar_items
                {
                    list-style-type: none;
                    width: 100%;
                    height: 64px;
                    margin: 0px;
                    padding: 0px;
                }
                    li#search_field
                    {
                        text-align: center;
                        padding: 18px 0px;
                    }
                        input#search_keyword
                        {
                            width: 35ex;
                            height: 27px;
                            font-family: 'Calibri', 'Tahoma', 'Arial', sans-serif;
                            font-size: 11pt;
                            color: rgba(0, 0, 0, 0.85);
                            border: none;
                            border-radius: 12px 0px 0px 12px;
                            margin: 0px;
                            padding: 0px 12px;
                            vertical-align: middle;
                        }
                        button#search_button
                        {
                            height: 27px;
                            width: 85px;
                            margin: 0px;
                            border: none;
                            border-radius: 0px 12px 12px 0px;
                            vertical-align: middle;
                        }
                        input#search_keyword:focus, button#search_button
                        {
                            outline: none;
                        }
			div#content
			{
				position: absolute;
				left: 0px;
				top: 0px;
				right: 0px;
				bottom: 0px;
				background: transparent;
                min-height: 450px;
                padding: 64px 0px;
                overflow: auto;
			}
                div#content div.group
                {
                    position: absolute;
                    background: rgba(0, 0, 0, 0.25);
                }
                    div#content div.group div.shortcut
                    {
                        position: absolute;
                        background: rgba(13, 128, 255, 1);
                        opacity: 0.70;
                        width: 210px;
                        height: 102px;
                        box-shadow: inset 0px 0px 0px 2px rgba(255, 255, 255, 0.2), inset 0px 0px 0px 1px rgba(0, 0, 0, 0.30);
                        border-radius: 2px;
                        animation-duration: 0.13s;
                        animation-name: shortcut_mouse_out;
                    }
                    div#content div.group div.shortcut:hover
                    {
                        opacity: 0.92;
                        animation-duration: 0.25s;
                        animation-name: shortcut_mouse_over;
                    }
                        div#content div.group div.shortcut span.title
                        {
                            position: absolute;
                            right: 8px;
                            bottom: 8px;
                            color: #fff;
                        }
			div#bottom_bar
			{
				background: rgba(255, 255, 255, 0.1);
                box-shadow: inset 0px 1px 0px 0px rgba(255, 255, 255, 0.1);
				position: absolute;
				left: 0px;
				right: 0px;
				bottom: 0px;
				height: 48px;
                z-index: 1000;
			}
            img#page_background
            {
                /* */
            }
            div#menus
            {
                /* */
            }
                div#menus ul
                {
                    list-style-type: none;
                    margin: 0px;
                    padding: 0px;
                    z-index: 5000;
                    border: 1px solid rgba(0, 0, 0, 0.35);
                    border-bottom-color: rgba(0, 0, 0, 0.45);
                    border-right-color: rgba(0, 0, 0, 0.45);
                    border-radius: 0px;
                    min-width: 150px;
                    position: absolute;
                    background: rgba(255, 255, 255, 0.85);
                    font-family: 'Calibri', 'Tahoma', 'Arial', sans-serif;
                    font-size: 11pt;
                    color: rgba(0, 0, 0, 0.85);
                    box-shadow: 2px 4px 4px 0px rgba(0, 0, 0, 0.13);
                    display: none;
                }
                ul.menu_popup
                {
                    opacity: 1;
                    animation-duration: 0.25s;
                    animation-name: menu_popup;
                }
                ul.menu_hide
                {
                    opacity: 0;
                    animation-duration: 0.13s;
                    animation-name: menu_hide;
                }
                    div#menus ul li
                    {
                        display: block;
                        margin: 0px;
                        padding: 8px 24px 8px 32px;
                        cursor: default;
                        vertical-align: middle;
                        color: rgba(0, 0, 0, 0.85);
                    }
                    div#menus ul li:hover
                    {
                        background: rgba(64, 128, 255, 0.75);
                        color: rgba(255, 255, 255, 1);
                    }
                    div#menus ul li img.icon
                    {
                        width: 16px;
                        height: 16px;
                        margin: 0px 8px 0px -24px;
                        padding: 0px;
                        vertical-align: middle;
                    }
                    div#menus ul li.separator
                    {
                        height: 0px;
                        max-height: 0px;
                        border-top: 1px solid rgba(0, 0, 0, 0.13);
                        text-indent: -1000px;
                        padding: 0px;
                        margin: 0px 2px;
                    }
                    div#menus ul li.separator:hover
                    {
                        background: transparent;
                    }
                    div#menus ul li.disabled
                    {
                        color: rgba(0, 0, 0, 0.35);
                    }
                    div#menus ul li.disabled:hover
                    {
                        background: transparent;
                    }
            /***********************************************************************************************************
             *
             * Animations
             *
             **********************************************************************************************************/
            @keyframes menu_popup
            {
                from { opacity: 0; }
                to   { opacity: 1; }
            }
            @keyframes menu_hide
            {
                from { opacity: 1; }
                to   { opacity: 0; }
            }

            @keyframes shortcut_mouse_over
            {
                from { opacity: 0.70; }
                to   { opacity: 0.92; }
            }
            @keyframes shortcut_mouse_out
            {
                from { opacity: 0.92; }
                to   { opacity: 0.70; }
            }
            /* ]]> */
		</style>
		<script type="text/javascript">
			/* <![CDATA[ */
			window.Main = function ()
			{
                /*******************************************************************************************************
                 *
                 * XElement()
                 *
                 ******************************************************************************************************/
                var xElement = function (obj)
                {
                    var result = null
                    var type = typeof obj.instance
                    switch (type) {
                        case 'undefined':
                            result = {}
                            break
                        case 'string':
                            result = document.getElementById(obj.instance)
                            break
                        case 'object':
                            result = obj.instance
                            break
                    }
                    for (var p in obj) {
                        if (p !== 'instance' && obj.hasOwnProperty(p)) {
                            if (p.substr(0, 4) === 'evt-') {
                                result.addEventListener(p.substr(4), obj[p])
                            }
                            else {
                                result[p] = obj[p]
                            }
                        }
                    }
                    return result
                }

                /*******************************************************************************************************
                 *
                 * Helpers
                 *
                 ******************************************************************************************************/
                window.Helpers =
                {
                    search: function (searchString)
                    {
                        if (searchString !== '') {
                            window.location.href = 'http://yandex.ru/yandsearch?text=' + searchString
                        }
                    }
                }

                /*******************************************************************************************************
                 *
                 * Menus
                 *
                 ******************************************************************************************************/
                window.Menus = xElement({ instance: 'menus',
                    ActiveMenu: null,
                    ContentMenu: xElement({ instance: 'content_menu',
                        AddItem: xElement({ instance: 'content_menu_add_item'})
                    }),
                    hide: function (menuObj)
                    {
                        if (menuObj !== null) {
                            menuObj.className = 'menu_hide'
                            setTimeout(function () {
                                menuObj.style.display = 'none'
                            }, 130)
                        }
                    },
                    popup: function (menuObj, x, y)
                    {
                        if (window.Menus.ActiveMenu !== null && window.Menus.ActiveMenu !== menuObj) {
                            window.Menus.hide(window.Menus.ActiveMenu)
                            window.Menus.ActiveMenu = null
                        }
                        menuObj.style.display = 'block'
                        var fitsLeft = x + menuObj.offsetWidth < window.Page.offsetWidth
                        var fitsTop = y + menuObj.offsetHeight < window.Page.offsetHeight
                        menuObj.style.left = fitsLeft ? x + 'px' : 'auto'
                        menuObj.style.top = fitsTop ? y + 'px' : 'auto'
                        menuObj.style.right = fitsLeft ? 'auto' : (window.Page.offsetWidth - x) + 'px'
                        menuObj.style.bottom = fitsTop ? 'auto' : (window.Page.offsetHeight - y) + 'px'
                        window.Menus.ActiveMenu = menuObj
                        menuObj.className = 'menu_popup'
                    }
                })

                /*******************************************************************************************************
                 *
                 * Page markup
                 *
                 ******************************************************************************************************/
                window.Page = xElement({ instance: 'page',
                    TopBar: xElement({ instance: 'top_bar',
                        Items: xElement({ instance: 'top_bar_items',
                            SearchKeyword: xElement({ instance: 'search_keyword',
                                'evt-paste': function (e)
                                {
                                    setTimeout(function () {
                                        window.Helpers.search(window.Page.TopBar.Items.SearchKeyword.value)
                                    }, 10)
                                },
                                'evt-keypress': function (e) {
                                    if (e.keyCode == 13) {
                                        window.Helpers.search(window.Page.TopBar.Items.SearchKeyword.value)
                                    }
                                }
                            }),
                            SearchButton: xElement({ instance: 'search_button',
                                'evt-click': function (e)
                                {
                                    window.Page.TopBar.Items.SearchKeyword.focus()
                                    window.Helpers.search(window.Page.TopBar.Items.SearchKeyword.value)
                                }
                            })
                        }),
                        'evt-contextmenu': function (e)
                        {
                            window.Menus.hide(window.Menus.ActiveMenu)
                        }
                    }),
                    Content: xElement({ instance: 'content',
                        'evt-contextmenu': function (e)
                        {
                            window.Menus.popup(window.Menus.ContentMenu, e.clientX, e.clientY)
                        },
                        Groups: [],
                        addGroup: function (group) {
                            this.Groups.push(group)
                            this.appendChild(group)
                        },
                        createGroup: function () {
                            return xElement({ instance: document.createElement('div'),
                                Shortcuts: [],
                                className: 'group',
                                addShortcut: function (shortcut) {
                                    this.Shortcuts.push(shortcut)
                                    this.appendChild(shortcut)
                                }
                            })
                        },
                        createShortcut: function (url, text, color) {
                            var result = xElement({
                                instance: document.createElement('div'),
                                className: 'shortcut',
                                Color: color,
                                Title: text,
                                Url: url,
                                setColor: function (newColor) {
                                    this.Color = newColor
                                    this.style.backgroundColor = this.Color
                                },
                                'evt-click': function (e) {
                                    window.location.href = this.Url
                                }
                            })
                            result.appendChild(xElement({
                                instance: document.createElement('span'),
                                className: 'title',
                                innerHTML: result.Title
                            }))
                            result.setColor(color)
                            return result
                        }
                    }),
                    BottomBar: xElement({ instance: 'bottom_bar',
                        'evt-contextmenu': function (e)
                        {
                            window.Menus.hide(window.Menus.ActiveMenu)
                        }
                    }),
                    Background: xElement({ instance: 'page_background' })
                })

                document.addEventListener('contextmenu', function (e) {
                    if (e.target !== window.Page.TopBar.Items.SearchKeyword) {
                        e.preventDefault()
                    }
                })

                document.addEventListener('click', function (e) {
                    if (e.button === 0) {
                        window.Menus.hide(window.Menus.ActiveMenu)
                    }
                })

                document.addEventListener('blur', function (e) {
                    window.Menus.hide(window.Menus.ActiveMenu)
                })

                // group and shortcut creation test {
                var g = window.Page.Content.createGroup()
                g.addShortcut(
                    window.Page.Content.createShortcut('http://google.com/', 'google', '#c00')
                )
                window.Page.Content.addGroup(g)
                // } group and shortcut creation test

                window.Page.TopBar.Items.SearchKeyword.focus()
			}

            /***********************************************************************************************************
             *
             * Start Main() entry point
             *
             **********************************************************************************************************/
			document.addEventListener('readystatechange', function () {
                switch (document.readyState) {
                    case 'loading':     // document started loading
                        break
                    case 'interactive': // document is loaded but not sub resources
                        window.Main()
                        break
                    case 'complete':    // document and its resources are loaded completely
                        break
                }
            })
			/* ]]> */
		</script>
	</head>
	<body>
		<div id="page">
            <img id="page_background" src="./bkgrnd/017.jpg" alt="" width="100%" height="100%" />
			<div id="top_bar">
				<ul id="top_bar_items">
                    <li id="search_field">
                        <input id="search_keyword" type="text" value="" /><button id="search_button" type="button">Search</button>
                    </li>
                </ul>
			</div>
			<div id="content">
                <div class="group">
                    <div class="shortcut" style="left: 0px; top: 0px;" onclick="document.location.href='https://facebook.com/'">
                        <span class="title">facebook</span>
                    </div>
                    <div class="shortcut" style="left: 211px; top: 0px;" onclick="document.location.href='https://vk.com/'">
                        <span class="title">vk</span>
                    </div>
                    <div class="shortcut" style="left: 422px; top: 0px;" onclick="document.location.href='https://youtube.com/'">
                        <span class="title">youtube</span>
                    </div>
                    <div class="shortcut" style="left: 0px; top: 102px;" onclick="document.location.href='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference'">
                        <span class="title">MDN</span>
                    </div>
                </div>
			</div>
			<div id="bottom_bar">

			</div>
		</div>
        <div id="menus">
            <ul id="content_menu">
                <li id="content_menu_add_item">Add item</li>
                <li class="separator">-</li>
                <li id="new_item">Do nothing</li>
                <li id="new_item2" class="disabled">Disabled</li>
                <li id="new_item3">Do everything</li>
            </ul>
        </div>
	</body>
</html>
